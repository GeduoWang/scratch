# Project Structure

## Directories

An overview of what files should go into which directory.

### src/

`src/` is the directory where all source files and private header files should go. A target's files
should be grouped into a sub-directory bearing the target's name: `src/<target name>/` (compare
`src/app` for target *app*'s sources).

Libraries are an exception as their source and private header
files should go into sub-directory `lib/` of `src`: `src/lib/<target name>` (e.g. you'll find the
files of target **lib_ruben** in `src/lib/lib_ruben/`)

### include/

Public header files of an executable or library should go into `include/scratch/<target name>` where
`<target name>` again is the name of the executable or library the files belong to.

**Note:** As you see the `include/` directory has one sub-directory with the same name as the
project. This is deliberate and a convention that should be followed to improve include statements.

### doc/

This directory contains additional documentation (e.g. Markdown files like here) which are put here
to prevent the root directory of the project from getting too crowded.

Also doxygen generated documentation will go into `doc/doxygen/` (this directory is created when
building the *doc_doxygen* the first time).

### build/

This directory is manually created by you when you configure CMake the first time.

### bin/

Automatically generated directory for output binaries.

## Tests

As you probably have noticed: there is no `tests/` directory in the project.
A target's test files (sources and fixtures) reside in a `tests/` sub-directory within the
respective target's directory. E.g. the tests of target **app** are in `src/app/tests/` and the
tests of target **lib_ruben** can be found in `src/lib/lib_ruben/tests`.

## The Project's Targets

A quick glance at the targets defined in this project.

### Executables

This project contains one executable **app**. Its source files and private header files reside in 
`src/app`. It does not have any public header files so there is no directory `/include/scratch/app`.

### Libraries

The project contains two libraries: **lib_stanley** a dynamic library & **lib_ruben** a static one.

The respective source & private header files (for *lib_stanley*) are in `src/lib/<library name>`.

## CMake

There is one `CMakeLists.txt` file per target (unit tests for a target count as a separate target)
and one "main" `CMakeLists.txt` file at the project's root directory. The latter is responsible for
including the other `CMakeLists.txt` files.

The CMake files are well documented. Refer to them to see how they are set up to work in this
project.

### version.hpp files

Each target has a `version.hpp` file which is prior to running the CMake configuration step only 
present as a `version.hpp.in` file. This way you specify the version in the CMakeLists.txt file and
CMake will write the major, minor and patch number into preprocessor macros in said version files.

## CTest & GoogleTest

**GoogleTest** is used as a testing framework and its sources are downloaded and built automatically
by CMake. **CTest** is setup to discover GoogleTest-tests automatically.

## Doxygen

Note that the `Doxyfile` for configuring Doxygen is provided as a CMake "template" file
(`Doxyfile.in`)and only available after project configuration using CMake.
The "configured" Doxyfile is in `/build`.

### Namespace Documentation

The most important thing here is that the project's main *namespace* `scratch` is
documented in file `include/scratch/scratch.dox` *outside of the sources*.

The libraries' (sub-) namespaces are documented in their respective `version.hpp` files (note that
these are generated by CMake and before configuration you only have `version.hpp.in` files).

### Markdown Documentation

Doxygen is configured to include `doc/MAIN.md` as main page.

### Groups

You will notice that a the `version.hpp.in` (and their configured products `version.hpp` of course
as well) make use of the Doxygen command `defgroup`. The groups defined by these commands are then
used in the header files (via commands `ingroup` and `addtogroup`) to group the definitions in
these files together into the group which was declared by the `defgroup` command in the respective
`version.hpp` file. This is necessary to group a targets sources within the documentation generated
by Doxygen not only by the file they are in but also by the target they belong to. 

These groups are called "Modules" by Doxygen and can be inspected via the button "Modules" in the
navigation bar of the autogenerated documentation HTML files.

Pay attention to the "group closing commands" (the comment block with the curly braces) at the
bottom of each file whose contents should appear in a Doxygen Module.

### Test files

You also might have noticed that I use the `file` Doxygen command (and the file header) in header
files but also in unit test source (.cpp) files. This is because I want the unit tests to also
show up in the documentation generated by Doxygen.

### Colliding names

If two or more files in a project share the same name (like `exceptions.hpp` does - of course in
different directories) I prefix the file name in the Doxygen `file` command by the directory name 
it lies in. E.g. `file lib_ruben\exceptions.hpp`. This way there are no issues with colliding file
names in Doxygen.
